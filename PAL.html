<!DOCTYPE html>
<html>
<body>

<h1>PAL mentor basic interface</h1>
<div id="content">

</di>
<div id="menu">

</div>
<script>
let socket = new WebSocket('ws://192.168.0.79:4040');
var names=[];
socket.onopen = function(e) {
  socket.send("CONNECT");
};
socket.onmessage = function(event) {
  
  var messages=event.data;
  if(messages!=""){
	  messages=messages.split(":::");
	  var val="";
	  for(i=0;i<messages.length;i++)
	  {
		val=messages[i].split("@@@")[1];
		document.getElementById("content").innerHTML+='<p class="Question" id="Q'+i+'">'+val+'</p><button class "Abutton" id="A'+i+'" onClick="Answer('+i+')">Answer Question</button>';
		names.push(messages[i].split("@@@")[0]);
	  }
  }
};

socket.onclose = function(event) {
  if (event.wasClean) {
    alert(`[close] Connection closed cleanly, code=${event.code} reason=${event.reason}`);
  } else {
    // e.g. server process killed or network down
    // event.code is usually 1006 in this case
    alert('[close] Connection died');
  }
};

socket.onerror = function(error) {
  alert(`[error] ${error.message}`);
};
function Answer(val) {
  var txt = prompt("Please enter your name:", "");
  if (!(txt == null || txt == "")) {
	
    socket.send("ANSWER:"+names[val]+":::"+txt);
  } 
  document.getElementById("Q"+val).remove();
  document.getElementById("A"+val).remove();
}
</script>
</body>
</html>